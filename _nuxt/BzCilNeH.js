import{r as w,v as r,x as i,y as e,H as N,I as _,z as s,G as x,J as D,_ as C,E as S,A as F,C as c,K as h,L as k}from"./i1fBxy5B.js";function P(){let f=null;return{connect:async()=>{try{return console.log("Requesting directory access..."),f=await window.showDirectoryPicker({id:"RP2350",mode:"readwrite"}),console.log("Directory selected:",f),f}catch(n){return console.error("Failed to access directory:",n),null}},uploadBinary:async(n,t=(a,u)=>{})=>{if(!f){console.error("No directory selected. Please connect first.");return}try{console.log("Uploading file:",n.name);const m=await(await(await f.getDirectoryHandle("BIN",{create:!0})).getFileHandle(n.name,{create:!0})).createWritable(),p=await n.arrayBuffer(),b=p.byteLength,o=64*1024;let l=0;for(let g=0;g<b;g+=o){const I=p.slice(g,g+o);await m.write(I),l+=I.byteLength,t(l,b)}await m.close(),console.log("File successfully written to directory.")}catch(a){console.error("Failed to upload file:",a)}},disconnect:()=>{f=null,console.log("Disconnected from directory.")}}}const U={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 flex flex-col items-center"},R={class:"mt-4"},B={key:0,class:"mt-4 text-gray-600"},V={key:1,class:"mt-2 text-sm text-gray-500"},$={key:2,class:"mt-4 w-full bg-gray-200 rounded-full h-4"},q={__name:"FileUploader",setup(f){const{connect:d,uploadBinary:v}=P(),y=w(""),n=w(null),t=w(""),a=w(0),u=()=>{n.value?.click()},m=async o=>{const l=o.target.files[0];l&&await b(l)},p=async o=>{const l=o.dataTransfer.files[0];l&&await b(l)},b=async o=>{o.name.endsWith(".uf2")||o.name.endsWith(".bin")?(y.value=o.name,t.value="Uploading...",a.value=0,await v(o,(l,g)=>{a.value=Math.round(l/g*100)}),a.value===100&&(t.value=`Upload complete! (${o.name})`)):t.value="Invalid file type. Only .uf2 and .bin files are allowed."};return(o,l)=>(r(),i("div",U,[e("button",{class:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 mb-4",onClick:l[0]||(l[0]=(...g)=>N(d)&&N(d)(...g))}," Connect to RP2350 "),e("div",{class:"w-full h-32 bg-gray-50 flex items-center justify-center border-2 border-dashed border-gray-300 rounded-md",onDragover:l[1]||(l[1]=_(()=>{},["prevent"])),onDrop:_(p,["prevent"])},l[2]||(l[2]=[e("p",{class:"text-gray-600"},"Drag and drop a .uf2 or .bin file here",-1)]),32),e("div",R,[e("input",{type:"file",accept:".uf2,.bin",ref_key:"fileInput",ref:n,class:"hidden",onChange:m},null,544),e("button",{class:"bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600",onClick:u}," Upload .uf2 or .bin File ")]),y.value?(r(),i("p",B,"Selected: "+s(y.value),1)):x("",!0),t.value?(r(),i("p",V,s(t.value),1)):x("",!0),a.value>0?(r(),i("div",$,[e("div",{class:"bg-blue-500 h-4 rounded-full transition-all duration-200",style:D({width:a.value+"%"})},null,4)])):x("",!0)]))}},H={class:"min-h-screen bg-black text-white flex flex-col py-8 px-6"},E={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},T={class:"bg-gray-900 p-6 rounded-lg shadow-lg border-l-4 border-neon-blue"},L={class:"bg-gray-900 p-6 rounded-lg shadow-lg border-l-4 border-neon-pink mt-12"},M={key:0},z={class:"list-disc list-inside space-y-2 mt-4 text-gray-300"},A={key:1,class:"text-gray-500"},O={key:2,class:"mt-8"},W={class:"list-disc list-inside space-y-4 text-gray-300"},G={class:"list-inside ml-6 space-y-2"},j={class:"list-disc list-inside ml-6"},J={class:"list-disc list-inside ml-6"},K={__name:"index",setup(f){const d=w(null),v=w([]),y=async()=>{try{const n=await navigator.usb.requestDevice({filters:[{vendorId:11914}]});if(!n){console.error("No RP2350 device found.");return}await n.open(),await n.selectConfiguration(1),await n.claimInterface(1),d.value={productName:n.productName,manufacturerName:n.manufacturerName,serialNumber:n.serialNumber,vendorId:`0x${n.vendorId.toString(16)}`,productId:`0x${n.productId.toString(16)}`},v.value=n.configurations.map(t=>({configurationValue:t.configurationValue,interfaces:t.interfaces.map(a=>({interfaceNumber:a.interfaceNumber,alternateSetting:a.alternateSetting,endpoints:a.alternates[0].endpoints.map(u=>({type:u.type,direction:u.direction}))}))})),console.log("Device Configurations:",v.value)}catch(n){console.error("Failed to inspect device:",n)}};return(n,t)=>{const a=q;return r(),i("div",H,[e("div",E,[t[0]||(t[0]=S('<div class="bg-gray-900 p-6 rounded-lg shadow-lg border-l-4 border-neon-green" data-v-f313edd6><h2 class="text-2xl font-bold mb-4 text-neon-green" data-v-f313edd6>How to Use</h2><ol class="list-decimal list-inside space-y-4 text-gray-300" data-v-f313edd6><li data-v-f313edd6> Click the <b data-v-f313edd6>&quot;Connect to RP2350&quot;</b> button to connect to your device. </li><li data-v-f313edd6> Grant access to the RP2350&#39;s filesystem (its mount point). </li><li data-v-f313edd6> Upload a <b data-v-f313edd6>.uf2</b> or <b data-v-f313edd6>.bin</b> file: <ul class="list-disc list-inside ml-6 space-y-2" data-v-f313edd6><li data-v-f313edd6>Drag and drop the file into the upload area.</li><li data-v-f313edd6>OR click the <b data-v-f313edd6>&quot;Upload File&quot;</b> button to select a file from your computer.</li></ul></li><li data-v-f313edd6> Inspect the connected device details using the <b data-v-f313edd6>&quot;Inspect RP2350&quot;</b> section below. </li></ol><p class="mt-4 text-gray-500" data-v-f313edd6> Note: Ensure your device is mounted and the site is served over HTTPS. </p></div>',1)),e("div",T,[F(a)])]),e("div",L,[t[13]||(t[13]=e("h2",{class:"text-2xl font-bold mb-4 text-neon-pink"},"Inspect RP2350",-1)),e("button",{class:"bg-neon-blue text-black px-4 py-2 rounded-md font-bold hover:bg-blue-400 shadow-md hover:shadow-lg mb-4",onClick:y}," Inspect RP2350 "),d.value?(r(),i("div",M,[t[6]||(t[6]=e("p",{class:"font-bold"},"Device Information:",-1)),e("ul",z,[e("li",null,[t[1]||(t[1]=e("b",null,"Product Name:",-1)),c(" "+s(d.value.productName||"Unknown"),1)]),e("li",null,[t[2]||(t[2]=e("b",null,"Manufacturer:",-1)),c(" "+s(d.value.manufacturerName||"Unknown"),1)]),e("li",null,[t[3]||(t[3]=e("b",null,"Serial Number:",-1)),c(" "+s(d.value.serialNumber||"Unknown"),1)]),e("li",null,[t[4]||(t[4]=e("b",null,"Vendor ID:",-1)),c(" "+s(d.value.vendorId),1)]),e("li",null,[t[5]||(t[5]=e("b",null,"Product ID:",-1)),c(" "+s(d.value.productId),1)])])])):(r(),i("p",A,' No device information available. Click "Inspect RP2350" to begin. ')),v.value.length?(r(),i("div",O,[t[12]||(t[12]=e("p",{class:"font-bold text-neon-green"},"Device Configurations:",-1)),(r(!0),i(h,null,k(v.value,(u,m)=>(r(),i("div",{key:m,class:"mt-6"},[e("p",null,[e("b",null,"Configuration "+s(m+1)+":",1)]),e("ul",W,[e("li",null,[t[7]||(t[7]=e("b",null,"Configuration Value:",-1)),c(" "+s(u.configurationValue),1)]),t[11]||(t[11]=e("li",null,[e("b",null,"Interfaces:")],-1)),e("ul",G,[(r(!0),i(h,null,k(u.interfaces,(p,b)=>(r(),i("li",{key:b,class:"space-y-2"},[e("b",null,"Interface "+s(b+1)+":",1),e("ul",j,[e("li",null,[t[8]||(t[8]=e("b",null,"Interface Number:",-1)),c(" "+s(p.interfaceNumber),1)]),e("li",null,[t[9]||(t[9]=e("b",null,"Alternate Setting:",-1)),c(" "+s(p.alternateSetting),1)]),e("li",null,[t[10]||(t[10]=e("b",null,"Endpoints:",-1)),e("ul",J,[(r(!0),i(h,null,k(p.endpoints,(o,l)=>(r(),i("li",{key:l},[e("b",null,"Endpoint "+s(l+1)+":",1),c(" "+s(o.type)+" ("+s(o.direction)+") ",1)]))),128))])])])]))),128))])])]))),128))])):x("",!0)])])}}},X=C(K,[["__scopeId","data-v-f313edd6"]]);export{X as default};
